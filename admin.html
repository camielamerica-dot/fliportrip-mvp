<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlipOrTrip | Admin Panel</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;800&display=swap" rel="stylesheet">
    <style>
        :root { --mint: #00FFC2; --obsidian: #0B0E14; }
        body { background: var(--obsidian); color: white; font-family: 'Plus Jakarta Sans', sans-serif; padding: 20px; }
        .container { max-width: 500px; margin: 0 auto; }
        h1 span { color: var(--mint); }
        .form-group { margin-bottom: 20px; display: flex; flex-direction: column; }
        label { font-size: 12px; text-transform: uppercase; color: var(--mint); margin-bottom: 5px; font-weight: 800; }
        input, textarea { background: #161B22; border: 1px solid #30363d; padding: 12px; border-radius: 8px; color: white; font-family: inherit; }
        input:focus { border-color: var(--mint); outline: none; }
        .btn { background: var(--mint); color: var(--obsidian); padding: 15px; border-radius: 8px; font-weight: 800; border: none; cursor: pointer; }
        .activity-card { background: #161B22; padding: 15px; border-radius: 12px; margin-top: 10px; display: flex; align-items: center; gap: 15px; border: 1px solid #30363d; }
        .activity-card img { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; }
        .activity-card div { flex: 1; }
    </style>
</head>
<body>

<div class="container">
    <h1><span>ADMIN</span> DASHBOARD</h1>
    <p>Voeg nieuwe activiteiten toe aan de database.</p>

    <div id="add-form">
        <div class="form-group">
            <label>Naam Activiteit</label>
            <input type="text" id="title" placeholder="bijv. Grotbiken">
        </div>
        <div class="form-group">
            <label>Beschrijving</label>
            <textarea id="desc" rows="3" placeholder="Korte pakkende tekst..."></textarea>
        </div>
        <div class="form-group">
            <label>Foto URL (Unsplash of direct link)</label>
            <input type="text" id="image" placeholder="https://images.unsplash.com/...">
        </div>
        <button class="btn" onclick="saveActivity()">ACTIVITEIT OPSLAAN</button>
    </div>

    <hr style="margin: 40px 0; border: 0; border-top: 1px solid #30363d;">

    <h2>Huidige Lijst</h2>
    <div id="activity-list">Laden...</div>
</div>

<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, onSnapshot } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

    // --- PLAK HIER JE FIREBASE CONFIG ---
    const firebaseConfig = {
     apiKey: "AIzaSyAx_XDqOW9hth7dwSFBZYJnk_dTa2lnvQ0",
            authDomain: "fliportrip-valkenburg.firebaseapp.com",
            projectId: "fliportrip-valkenburg",
            storageBucket: "fliportrip-valkenburg.firebasestorage.app",
            messagingSenderId: "1050989330669",
            appId: "1:1050989330669:web:6649f61cbec8ee3b3f8ce4"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const activitiesCol = collection(db, "activities");

    // OPSLAAN
    window.saveActivity = async () => {
        const title = document.getElementById('title').value;
        const desc = document.getElementById('desc').value;
        const image = document.getElementById('image').value;

        if(!title || !desc || !image) return alert("Vul alles in!");

        try {
            await addDoc(activitiesCol, { title, desc, image, timestamp: Date.now() });
            document.getElementById('title').value = '';
            document.getElementById('desc').value = '';
            document.getElementById('image').value = '';
            alert("Opgeslagen!");
        } catch (e) { console.error(e); }
    };

    // LIVE LIJST TONEN
    onSnapshot(activitiesCol, (snapshot) => {
        const list = document.getElementById('activity-list');
        list.innerHTML = '';
        snapshot.forEach((docSnap) => {
            const data = docSnap.data();
            list.innerHTML += `
                <div class="activity-card">
                    <img src="${data.image}">
                    <div>
                        <strong>${data.title}</strong><br>
                        <small style="opacity:0.6">${data.desc.substring(0, 40)}...</small>
                    </div>
                </div>
            `;
        });
    });
</script>

</body>
</html>
